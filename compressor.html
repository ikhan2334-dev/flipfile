<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>File Compressor - FlipFile | Reduce File Size Without Quality Loss</title>
    <meta name="description" content="Compress images and documents without losing quality. Reduce PDF, JPG, PNG file sizes by up to 80%. Secure online compression tool.">
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Alata&family=Aldrich&family=Black+Ops+One&family=Teko:wght@300;400;500;600&family=Averia+Libre:wght@300;400;700&display=swap" rel="stylesheet">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    <link rel="stylesheet" href="style.css">
    <style>
        .compression-presets {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
            gap: 20px;
            margin: 40px 0;
        }
        
        .preset-card {
            background: white;
            border-radius: var(--border-radius);
            padding: 25px;
            text-align: center;
            cursor: pointer;
            transition: var(--transition);
            border: 2px solid #E2E8F0;
            position: relative;
            overflow: hidden;
        }
        
        .preset-card:hover {
            transform: translateY(-5px);
            box-shadow: var(--box-shadow);
        }
        
        .preset-card.active {
            border-color: var(--primary-green);
            background: linear-gradient(135deg, #F0F9FF, #E0F2FE);
        }
        
        .preset-card i {
            font-size: 2.5rem;
            margin-bottom: 15px;
        }
        
        .preset-card h4 {
            margin-bottom: 10px;
            font-family: 'Aldrich', sans-serif;
        }
        
        .preset-card p {
            color: #64748B;
            font-size: 0.9rem;
        }
        
        .compression-badge {
            position: absolute;
            top: 15px;
            right: 15px;
            background: var(--primary-green);
            color: white;
            padding: 5px 10px;
            border-radius: 20px;
            font-size: 0.8rem;
            font-weight: bold;
        }
        
        .compression-controls {
            background: white;
            border-radius: var(--border-radius);
            padding: 30px;
            margin: 40px 0;
            box-shadow: var(--box-shadow);
        }
        
        .control-group {
            margin-bottom: 30px;
        }
        
        .control-group h4 {
            margin-bottom: 20px;
            color: var(--primary-blue);
            font-family: 'Aldrich', sans-serif;
            display: flex;
            align-items: center;
            gap: 10px;
        }
        
        .slider-container {
            position: relative;
            padding: 20px 0;
        }
        
        .slider-labels {
            display: flex;
            justify-content: space-between;
            margin-top: 10px;
            color: #64748B;
            font-size: 0.9rem;
        }
        
        .dimension-controls {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
            gap: 20px;
            margin-top: 15px;
        }
        
        .dimension-box {
            background: #F8FAFC;
            border-radius: 8px;
            padding: 20px;
            text-align: center;
        }
        
        .dimension-box input {
            width: 100%;
            padding: 12px;
            border: 2px solid #E2E8F0;
            border-radius: 8px;
            font-size: 1.2rem;
            text-align: center;
            font-family: 'Aldrich', sans-serif;
        }
        
        .dimension-box label {
            display: block;
            margin-bottom: 10px;
            color: var(--dark-text);
            font-weight: bold;
        }
        
        .comparison-section {
            display: grid;
            grid-template-columns: 1fr 1fr;
            gap: 30px;
            margin: 40px 0;
        }
        
        .comparison-card {
            background: white;
            border-radius: var(--border-radius);
            padding: 30px;
            text-align: center;
            box-shadow: var(--box-shadow);
        }
        
        .comparison-card h4 {
            margin-bottom: 20px;
            color: var(--dark-text);
        }
        
        .file-visual {
            width: 150px;
            height: 150px;
            margin: 0 auto 20px;
            border-radius: 50%;
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 3.5rem;
            color: white;
        }
        
        .original-file {
            background: linear-gradient(135deg, #FF6B6B, #FF4444);
        }
        
        .compressed-file {
            background: linear-gradient(135deg, #34D399, #10B981);
        }
        
        .stats-display {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(150px, 1fr));
            gap: 20px;
            margin-top: 30px;
        }
        
        .stat-item {
            text-align: center;
        }
        
        .stat-value {
            font-size: 1.8rem;
            font-weight: bold;
            margin-bottom: 5px;
        }
        
        .stat-label {
            color: #64748B;
            font-size: 0.9rem;
        }
        
        @media (max-width: 768px) {
            .comparison-section {
                grid-template-columns: 1fr;
            }
            
            .dimension-controls {
                grid-template-columns: 1fr;
            }
        }
    </style>
</head>
<body>
    <!-- Top Header -->
    <header class="top-header">
        <a href="index.html" class="logo-container">
            <div class="logo-icon">
                <i class="fas fa-file-pdf"></i>
            </div>
            <div>
                <div class="logo-text">
                    <span class="flip">Flip</span><span class="file">File</span>
                </div>
                <div class="logo-slogan">FlipFast.StaySecure</div>
            </div>
        </a>
        
        <div class="nav-buttons">
            <a href="pdf-tools.html" class="nav-button">PDF Unlock/Lock</a>
            
            <div class="dropdown">
                <a href="converter.html" class="nav-button">Converter</a>
                <div class="dropdown-content">
                    <div class="dropdown-section">
                        <div class="dropdown-header">
                            <i class="fas fa-image"></i>
                            Image Files
                        </div>
                        <div class="dropdown-items">
                            <a href="converter.html?type=jpg" class="dropdown-item image-item">
                                <i class="fas fa-file-image jpg-icon"></i>
                                <span>JPG</span>
                            </a>
                            <a href="converter.html?type=png" class="dropdown-item image-item">
                                <i class="fas fa-file-image png-icon"></i>
                                <span>PNG</span>
                            </a>
                            <a href="converter.html?type=svg" class="dropdown-item image-item">
                                <i class="fas fa-file-code svg-icon"></i>
                                <span>SVG</span>
                            </a>
                            <a href="converter.html?type=webp" class="dropdown-item image-item">
                                <i class="fas fa-file-image webp-icon"></i>
                                <span>WEBP</span>
                            </a>
                        </div>
                    </div>
                    
                    <div class="dropdown-section">
                        <div class="dropdown-header">
                            <i class="fas fa-file-alt"></i>
                            Document Files
                        </div>
                        <div class="dropdown-items">
                            <a href="converter.html?type=pdf" class="dropdown-item document-item">
                                <i class="fas fa-file-pdf pdf-icon"></i>
                                <span>PDF</span>
                            </a>
                            <a href="converter.html?type=doc" class="dropdown-item document-item">
                                <i class="fas fa-file-word doc-icon"></i>
                                <span>DOC</span>
                            </a>
                            <a href="converter.html?type=xls" class="dropdown-item document-item">
                                <i class="fas fa-file-excel xls-icon"></i>
                                <span>XLS</span>
                            </a>
                            <a href="converter.html?type=ppt" class="dropdown-item document-item">
                                <i class="fas fa-file-powerpoint ppt-icon"></i>
                                <span>PPT</span>
                            </a>
                        </div>
                    </div>
                </div>
            </div>
            
            <div class="dropdown">
                <a href="compressor.html" class="nav-button">Compressor</a>
                <div class="dropdown-content">
                    <div class="dropdown-section">
                        <div class="dropdown-header">
                            <i class="fas fa-file-image"></i>
                            Image Files
                        </div>
                        <div class="dropdown-items">
                            <a href="compressor.html?type=jpg" class="dropdown-item image-item">
                                <i class="fas fa-file-image jpg-icon"></i>
                                <span>JPG</span>
                            </a>
                            <a href="compressor.html?type=png" class="dropdown-item image-item">
                                <i class="fas fa-file-image png-icon"></i>
                                <span>PNG</span>
                            </a>
                            <a href="compressor.html?type=svg" class="dropdown-item image-item">
                                <i class="fas fa-file-code svg-icon"></i>
                                <span>SVG</span>
                            </a>
                        </div>
                    </div>
                    
                    <div class="dropdown-section">
                        <div class="dropdown-header">
                            <i class="fas fa-file-contract"></i>
                            Document Files
                        </div>
                        <div class="dropdown-items">
                            <a href="compressor.html?type=pdf" class="dropdown-item document-item">
                                <i class="fas fa-file-pdf pdf-icon"></i>
                                <span>PDF</span>
                            </a>
                            <a href="compressor.html?type=doc" class="dropdown-item document-item">
                                <i class="fas fa-file-word doc-icon"></i>
                                <span>DOC</span>
                            </a>
                        </div>
                    </div>
                </div>
            </div>
            
            <a href="#" class="nav-button login-btn">Login</a>
        </div>
    </header>

    <!-- Hero Section -->
    <section class="hero-section">
        <div class="hero-meta">Smart File Compression</div>
        <h1 class="hero-headline">Reduce File Size Without Losing Quality</h1>
        <div class="hero-subheadline">
            <i class="fas fa-compress-alt"></i>
            <span>Up to 80% size reduction with intelligent compression</span>
        </div>
    </section>

    <!-- Compressor Interface -->
    <section class="content-section">
        <h2 class="section-title">File Compressor</h2>
        
        <!-- File Upload Area -->
        <div class="drag-drop-area" id="dragDropArea">
            <div class="drag-drop-icon">
                <i class="fas fa-cloud-upload-alt"></i>
            </div>
            <div class="drag-drop-text">Drag & drop your file here or click to browse</div>
            <button class="select-file-btn" id="selectFileBtn">Select File</button>
            <input type="file" id="fileInput" style="display: none;">
            
            <div class="file-types">
                <div class="file-type pdf">
                    <i class="fas fa-file-pdf" style="color: #FF4444;"></i>
                    <span>PDF</span>
                </div>
                <div class="file-type jpg">
                    <i class="fas fa-file-image" style="color: #10B981;"></i>
                    <span>JPG</span>
                </div>
                <div class="file-type png">
                    <i class="fas fa-file-image" style="color: #3B82F6;"></i>
                    <span>PNG</span>
                </div>
                <div class="file-type svg">
                    <i class="fas fa-file-code" style="color: #F59E0B;"></i>
                    <span>SVG</span>
                </div>
                <div class="file-type word">
                    <i class="fas fa-file-word" style="color: #3B82F6;"></i>
                    <span>WORD</span>
                </div>
            </div>
        </div>
        
        <!-- Compression Presets -->
        <div class="compression-presets">
            <div class="preset-card active" data-preset="optimal">
                <div class="compression-badge">RECOMMENDED</div>
                <i class="fas fa-bolt" style="color: #F59E0B;"></i>
                <h4>Optimal Compression</h4>
                <p>Best balance of quality and size reduction</p>
            </div>
            
            <div class="preset-card" data-preset="maximum">
                <div class="compression-badge">MAXIMUM</div>
                <i class="fas fa-compress-alt" style="color: #10B981;"></i>
                <h4>Maximum Compression</h4>
                <p>Smallest possible file size</p>
            </div>
            
            <div class="preset-card" data-preset="light">
                <i class="fas fa-feather-alt" style="color: #3B82F6;"></i>
                <h4>Light Compression</h4>
                <p>Minimal compression, best quality</p>
            </div>
            
            <div class="preset-card" data-preset="custom">
                <i class="fas fa-sliders-h" style="color: #8B5CF6;"></i>
                <h4>Custom Settings</h4>
                <p>Adjust all parameters manually</p>
            </div>
        </div>
        
        <!-- Compression Controls -->
        <div class="compression-controls" id="customControls" style="display: none;">
            <div class="control-group">
                <h4><i class="fas fa-image"></i> Image Compression Settings</h4>
                
                <div class="slider-container">
                    <label for="qualitySlider">Quality: <span id="qualityValue">85%</span></label>
                    <input type="range" id="qualitySlider" min="10" max="100" value="85" step="5" style="width: 100%; margin-top: 10px;">
                    <div class="slider-labels">
                        <span>Smallest Size</span>
                        <span>Best Quality</span>
                    </div>
                </div>
                
                <div class="slider-container">
                    <label for="compressionSlider">Compression Level: <span id="compressionValue">Medium</span></label>
                    <input type="range" id="compressionSlider" min="1" max="3" value="2" step="1" style="width: 100%; margin-top: 10px;">
                    <div class="slider-labels">
                        <span>Low</span>
                        <span>Medium</span>
                        <span>High</span>
                    </div>
                </div>
            </div>
            
            <div class="control-group">
                <h4><i class="fas fa-expand-alt"></i> Resize Dimensions</h4>
                
                <div class="dimension-controls">
                    <div class="dimension-box">
                        <label for="resizeWidth">Width (px)</label>
                        <input type="number" id="resizeWidth" placeholder="Auto" min="100" max="5000">
                    </div>
                    
                    <div class="dimension-box">
                        <label for="resizeHeight">Height (px)</label>
                        <input type="number" id="resizeHeight" placeholder="Auto" min="100" max="5000">
                    </div>
                </div>
                
                <div style="margin-top: 15px;">
                    <label style="display: flex; align-items: center; gap: 10px;">
                        <input type="checkbox" id="maintainAspect" checked>
                        <span>Maintain aspect ratio</span>
                    </label>
                </div>
            </div>
            
            <div class="control-group">
                <h4><i class="fas fa-cog"></i> Advanced Options</h4>
                
                <div style="display: grid; grid-template-columns: repeat(auto-fit, minmax(200px, 1fr)); gap: 20px;">
                    <div>
                        <label for="colorDepth">Color Depth:</label>
                        <select id="colorDepth" style="width: 100%; margin-top: 10px;">
                            <option value="auto">Auto (Keep Original)</option>
                            <option value="8bit">8-bit (256 colors)</option>
                            <option value="16bit">16-bit (65K colors)</option>
                            <option value="24bit">24-bit (16M colors)</option>
                        </select>
                    </div>
                    
                    <div>
                        <label for="dpiSetting">DPI Setting:</label>
                        <select id="dpiSetting" style="width: 100%; margin-top: 10px;">
                            <option value="auto">Auto (Keep Original)</option>
                            <option value="72">72 DPI (Web)</option>
                            <option value="150">150 DPI (Good)</option>
                            <option value="300">300 DPI (Print)</option>
                        </select>
                    </div>
                    
                    <div>
                        <label for="compressionMethod">Method:</label>
                        <select id="compressionMethod" style="width: 100%; margin-top: 10px;">
                            <option value="smart">Smart Compression</option>
                            <option value="lossy">Lossy (Smaller)</option>
                            <option value="lossless">Lossless (Quality)</option>
                        </select>
                    </div>
                </div>
            </div>
        </div>
        
        <!-- File Comparison -->
        <div class="comparison-section" id="comparisonSection" style="display: none;">
            <div class="comparison-card">
                <h4>Original File</h4>
                <div class="file-visual original-file">
                    <i class="fas fa-file" id="originalFileIcon"></i>
                </div>
                <div class="stats-display">
                    <div class="stat-item">
                        <div class="stat-value" id="originalSize">0 MB</div>
                        <div class="stat-label">File Size</div>
                    </div>
                    <div class="stat-item">
                        <div class="stat-value" id="originalDimensions">0×0</div>
                        <div class="stat-label">Dimensions</div>
                    </div>
                    <div class="stat-item">
                        <div class="stat-value" id="originalQuality">100%</div>
                        <div class="stat-label">Quality</div>
                    </div>
                </div>
            </div>
            
            <div class="comparison-card">
                <h4>Compressed File</h4>
                <div class="file-visual compressed-file">
                    <i class="fas fa-file-archive" id="compressedFileIcon"></i>
                </div>
                <div class="stats-display">
                    <div class="stat-item">
                        <div class="stat-value" id="compressedSize">0 MB</div>
                        <div class="stat-label">File Size</div>
                    </div>
                    <div class="stat-item">
                        <div class="stat-value" id="compressedDimensions">0×0</div>
                        <div class="stat-label">Dimensions</div>
                    </div>
                    <div class="stat-item">
                        <div class="stat-value" id="compressedQuality">85%</div>
                        <div class="stat-label">Quality</div>
                    </div>
                </div>
            </div>
        </div>
        
        <!-- Reduction Stats -->
        <div class="results-section" id="reductionStats" style="display: none;">
            <h3 style="text-align: center; margin-bottom: 20px;">
                <i class="fas fa-chart-line"></i> Compression Results
            </h3>
            
            <div class="result-stats">
                <div class="stat-card">
                    <i class="fas fa-weight-hanging"></i>
                    <div>Size Reduction</div>
                    <div id="sizeReduction" style="font-weight: bold; color: #10B981;">0%</div>
                </div>
                
                <div class="stat-card">
                    <i class="fas fa-download"></i>
                    <div>Download Size</div>
                    <div id="downloadSize" style="font-weight: bold;">0 MB</div>
                </div>
                
                <div class="stat-card">
                    <i class="fas fa-bolt"></i>
                    <div>Processing Time</div>
                    <div id="processingTime" style="font-weight: bold;">0.5s</div>
                </div>
                
                <div class="stat-card">
                    <i class="fas fa-sd-card"></i>
                    <div>Space Saved</div>
                    <div id="spaceSaved" style="font-weight: bold;">0 MB</div>
                </div>
            </div>
        </div>
        
        <!-- Action Buttons -->
        <div style="text-align: center; margin: 40px 0;">
            <button class="select-file-btn" id="compressBtn" style="padding: 20px 60px; font-size: 1.3rem;">
                <i class="fas fa-compress-alt"></i> Compress File Now
            </button>
            <button class="select-file-btn" id="downloadBtn" style="padding: 20px 40px; font-size: 1.3rem; margin-left: 15px; display: none;">
                <i class="fas fa-download"></i> Download Compressed
            </button>
            <p style="margin-top: 15px; color: #64748B;">
                <i class="fas fa-shield-alt"></i> All compression happens securely in your browser
            </p>
        </div>
        
        <!-- Processing Section -->
        <div class="processing-section" id="processingSection">
            <h3 style="text-align: center; margin-bottom: 20px;">
                <i class="fas fa-cogs"></i> Compressing Your File
            </h3>
            
            <div style="text-align: center; margin-bottom: 20px;">
                <div id="processingText">Analyzing file for optimal compression...</div>
            </div>
            
            <div class="progress-bar">
                <div class="progress-fill" id="progressFill"></div>
            </div>
            
            <div style="text-align: center; margin-top: 20px; color: #64748B;">
                <i class="fas fa-lock"></i>
                <small>Your file is being processed with advanced compression algorithms</small>
            </div>
        </div>
        
        <!-- Ad Section -->
        <div class="ad-section">
            <div class="ad-label">Advertisement</div>
            <div class="ad-container" id="adContainer">
                Try Premium for batch compression and unlimited file size!
            </div>
        </div>
    </section>

    <!-- SEO Section -->
    <section class="content-section" style="padding-top: 0;">
        <div class="seo-section">
            <h3>Advanced File Compression Technology</h3>
            <p>FlipFile's compression engine uses intelligent algorithms to analyze your files and apply the optimal compression strategy for each file type. For images, we use advanced techniques like chroma subsampling, quantization optimization, and predictive coding to reduce file size while maintaining visual quality.</p>
            <p>For documents, our compression algorithms intelligently compress text, images, and embedded fonts separately, achieving up to 80% size reduction without affecting readability or formatting. PDF files are optimized by recompressing embedded images, removing duplicate resources, and optimizing font embedding.</p>
            <p>All compression happens locally in your browser for maximum security. Your files are never uploaded to our servers, ensuring complete privacy. After compression, you can preview the results before downloading, giving you full control over the quality vs. size trade-off.</p>
        </div>
    </section>

    <!-- Footer -->
    <footer>
        <div class="footer-content">
            <div class="footer-section">
                <h3>Contact</h3>
                <ul>
                    <li><i class="fas fa-envelope"></i> <a href="mailto:cyview4u@gmail.com">cyview4u@gmail.com</a></li>
                    <li><i class="fas fa-globe"></i> <a href="https://www.flipfile.online" target="_blank">www.flipfile.online</a></li>
                    <li><i class="fas fa-quote-left"></i> "The swift shift for your secure files."</li>
                </ul>
            </div>
            
            <div class="footer-section">
                <h3>Legal</h3>
                <ul>
                    <li><i class="fas fa-shield-alt"></i> <a href="privacy.html">Privacy Policy</a></li>
                    <li><i class="fas fa-file-contract"></i> <a href="terms.html">Terms of Service</a></li>
                    <li><i class="fas fa-cookie-bite"></i> <a href="cookies.html">Cookie Policy</a></li>
                    <li><i class="fas fa-database"></i> <a href="data-protection.html">Data Protection</a></li>
                </ul>
            </div>
            
            <div class="footer-section">
                <h3>Resources</h3>
                <ul>
                    <li><i class="fas fa-blog"></i> <a href="blog.html">Blog</a></li>
                    <li><i class="fas fa-question-circle"></i> <a href="faq.html">FAQ</a></li>
                    <li><i class="fas fa-comment-dots"></i> <a href="feedback.html">Feedback</a></li>
                    <li><i class="fas fa-headset"></i> <a href="support.html">Support Center</a></li>
                </ul>
            </div>
            
            <div class="footer-section">
                <h3>Follow Us</h3>
                <p>Stay connected with FlipFile for updates and tips on file optimization.</p>
                <div class="social-icons">
                    <a href="#" class="social-icon" aria-label="YouTube"><i class="fab fa-youtube"></i></a>
                    <a href="#" class="social-icon" aria-label="TikTok"><i class="fab fa-tiktok"></i></a>
                    <a href="#" class="social-icon" aria-label="Instagram"><i class="fab fa-instagram"></i></a>
                    <a href="#" class="social-icon" aria-label="LinkedIn"><i class="fab fa-linkedin-in"></i></a>
                </div>
            </div>
        </div>
        
        <div class="footer-bottom">
            <p>&copy; 2023 FlipFile. All rights reserved. | Designed with security and privacy in mind.</p>
            <p class="footer-meta">The swift shift for your secure files.</p>
        </div>
    </footer>

    <!-- File Processing Modal -->
    <div class="processing-modal" id="processingModal">
        <div class="modal-content">
            <div class="processing-spinner"></div>
            <h3>Compressing Your File</h3>
            <p id="modalProcessingText">Analyzing file content...</p>
            <div class="ad-container" style="margin-top: 20px; height: 80px;">
                <i class="fas fa-rocket" style="color: #F59E0B;"></i>
                <div>Premium users enjoy unlimited compression!</div>
            </div>
        </div>
    </div>

    <script src="script.js"></script>
    <script>
        // Compressor-specific JavaScript
        document.addEventListener('DOMContentLoaded', function() {
            const fileInput = document.getElementById('fileInput');
            const selectFileBtn = document.getElementById('selectFileBtn');
            const compressBtn = document.getElementById('compressBtn');
            const downloadBtn = document.getElementById('downloadBtn');
            const dragDropArea = document.getElementById('dragDropArea');
            const qualitySlider = document.getElementById('qualitySlider');
            const qualityValue = document.getElementById('qualityValue');
            const compressionSlider = document.getElementById('compressionSlider');
            const compressionValue = document.getElementById('compressionValue');
            const presetCards = document.querySelectorAll('.preset-card');
            const customControls = document.getElementById('customControls');
            const comparisonSection = document.getElementById('comparisonSection');
            const reductionStats = document.getElementById('reductionStats');
            const processingSection = document.getElementById('processingSection');
            
            let selectedFile = null;
            let selectedPreset = 'optimal';
            let compressionResults = null;
            
            // Initialize sliders
            if (qualitySlider && qualityValue) {
                qualitySlider.addEventListener('input', function() {
                    qualityValue.textContent = this.value + '%';
                    updateCompressionPreview();
                });
            }
            
            if (compressionSlider && compressionValue) {
                const compressionLabels = ['Low', 'Medium', 'High'];
                compressionSlider.addEventListener('input', function() {
                    compressionValue.textContent = compressionLabels[this.value - 1];
                    updateCompressionPreview();
                });
            }
            
            // Preset selection
            presetCards.forEach(card => {
                card.addEventListener('click', function() {
                    // Remove active class from all cards
                    presetCards.forEach(c => c.classList.remove('active'));
                    
                    // Add active class to clicked card
                    this.classList.add('active');
                    selectedPreset = this.dataset.preset;
                    
                    // Show/hide custom controls
                    if (selectedPreset === 'custom') {
                        customControls.style.display = 'block';
                    } else {
                        customControls.style.display = 'none';
                        applyPresetSettings(selectedPreset);
                    }
                    
                    updateCompressionPreview();
                });
            });
            
            // File selection
            selectFileBtn.addEventListener('click', () => {
                fileInput.click();
            });
            
            fileInput.addEventListener('change', (e) => {
                if (e.target.files[0]) {
                    handleFileUpload(e.target.files[0]);
                }
            });
            
            // Drag and drop
            ['dragenter', 'dragover'].forEach(eventName => {
                dragDropArea.addEventListener(eventName, (e) => {
                    e.preventDefault();
                    dragDropArea.classList.add('active');
                }, false);
            });
            
            ['dragleave', 'drop'].forEach(eventName => {
                dragDropArea.addEventListener(eventName, (e) => {
                    e.preventDefault();
                    dragDropArea.classList.remove('active');
                }, false);
            });
            
            dragDropArea.addEventListener('drop', (e) => {
                e.preventDefault();
                const files = e.dataTransfer.files;
                if (files[0]) {
                    handleFileUpload(files[0]);
                }
            }, false);
            
            // Compress button
            compressBtn.addEventListener('click', async () => {
                if (!selectedFile) {
                    alert('Please select a file first!');
                    return;
                }
                
                // Show processing
                processingSection.style.display = 'block';
                reductionStats.style.display = 'none';
                
                // Simulate compression
                await simulateCompression();
            });
            
            // Download button
            downloadBtn.addEventListener('click', () => {
                if (!compressionResults) return;
                
                // Create download
                const blob = new Blob(['Compressed file content'], { type: 'application/octet-stream' });
                const url = URL.createObjectURL(blob);
                const a = document.createElement('a');
                a.href = url;
                a.download = `compressed_${selectedFile.name}`;
                document.body.appendChild(a);
                a.click();
                document.body.removeChild(a);
                URL.revokeObjectURL(url);
                
                showSuccessMessage();
            });
            
            // Helper functions
            function handleFileUpload(file) {
                selectedFile = file;
                
                // Show comparison section
                comparisonSection.style.display = 'grid';
                reductionStats.style.display = 'none';
                downloadBtn.style.display = 'none';
                
                // Update file info
                updateFileInfo(file);
                
                // Apply selected preset
                applyPresetSettings(selectedPreset);
                updateCompressionPreview();
            }
            
            function updateFileInfo(file) {
                const fileSize = formatFileSize(file.size);
                const fileExtension = file.name.split('.').pop().toLowerCase();
                
                // Update original file info
                document.getElementById('originalSize').textContent = fileSize;
                document.getElementById('originalDimensions').textContent = 'Auto';
                document.getElementById('originalQuality').textContent = '100%';
                
                // Set file icon
                const iconMap = {
                    'pdf': 'fa-file-pdf',
                    'jpg': 'fa-file-image',
                    'jpeg': 'fa-file-image',
                    'png': 'fa-file-image',
                    'svg': 'fa-file-code',
                    'doc': 'fa-file-word',
                    'docx': 'fa-file-word'
                };
                
                const fileIcon = iconMap[fileExtension] || 'fa-file';
                document.getElementById('originalFileIcon').className = `fas ${fileIcon}`;
                document.getElementById('compressedFileIcon').className = `fas fa-file-archive`;
            }
            
            function applyPresetSettings(preset) {
                switch(preset) {
                    case 'optimal':
                        qualitySlider.value = 85;
                        compressionSlider.value = 2;
                        break;
                    case 'maximum':
                        qualitySlider.value = 60;
                        compressionSlider.value = 3;
                        break;
                    case 'light':
                        qualitySlider.value = 95;
                        compressionSlider.value = 1;
                        break;
                    case 'custom':
                        // Keep current values
                        break;
                }
                
                // Update display values
                if (qualitySlider && qualityValue) {
                    qualityValue.textContent = qualitySlider.value + '%';
                }
                if (compressionSlider && compressionValue) {
                    const compressionLabels = ['Low', 'Medium', 'High'];
                    compressionValue.textContent = compressionLabels[compressionSlider.value - 1];
                }
            }
            
            function updateCompressionPreview() {
                if (!selectedFile) return;
                
                const quality = parseInt(qualitySlider.value);
                const compressionLevel = parseInt(compressionSlider.value);
                
                // Calculate compressed size (simulated)
                const originalSize = selectedFile.size;
                const qualityFactor = quality / 100;
                const compressionFactor = 1 - (compressionLevel * 0.15);
                const compressedSize = originalSize * qualityFactor * compressionFactor;
                
                // Update compressed file info
                document.getElementById('compressedSize').textContent = formatFileSize(compressedSize);
                document.getElementById('compressedDimensions').textContent = 'Auto';
                document.getElementById('compressedQuality').textContent = quality + '%';
                
                // Calculate reduction percentage
                const reduction = ((originalSize - compressedSize) / originalSize * 100).toFixed(1);
                document.getElementById('sizeReduction').textContent = reduction + '%';
                document.getElementById('downloadSize').textContent = formatFileSize(compressedSize);
                document.getElementById('spaceSaved').textContent = formatFileSize(originalSize - compressedSize);
                
                // Color code reduction
                const reductionElement = document.getElementById('sizeReduction');
                if (reduction >= 50) {
                    reductionElement.style.color = '#10B981';
                } else if (reduction >= 25) {
                    reductionElement.style.color = '#F59E0B';
                } else {
                    reductionElement.style.color = '#EF4444';
                }
            }
            
            function formatFileSize(bytes) {
                if (bytes === 0) return '0 Bytes';
                const k = 1024;
                const sizes = ['Bytes', 'KB', 'MB', 'GB'];
                const i = Math.floor(Math.log(bytes) / Math.log(k));
                return parseFloat((bytes / Math.pow(k, i)).toFixed(2)) + ' ' + sizes[i];
            }
            
            async function simulateCompression() {
                const progressFill = document.getElementById('progressFill');
                const processingText = document.getElementById('processingText');
                const modalProcessingText = document.getElementById('modalProcessingText');
                
                const steps = [
                    "Analyzing file structure...",
                    "Optimizing image compression...",
                    "Reducing color depth...",
                    "Applying advanced algorithms...",
                    "Finalizing compression...",
                    "Verifying quality..."
                ];
                
                // Show modal
                document.getElementById('processingModal').style.display = 'flex';
                
                for (let i = 0; i < steps.length; i++) {
                    const progress = ((i + 1) / steps.length) * 100;
                    
                    // Update progress
                    if (progressFill) progressFill.style.width = `${progress}%`;
                    
                    // Update text
                    if (processingText) processingText.textContent = steps[i];
                    if (modalProcessingText) modalProcessingText.textContent = steps[i];
                    
                    // Wait
                    await new Promise(resolve => setTimeout(resolve, 800));
                }
                
                // Hide modal and update UI
                document.getElementById('processingModal').style.display = 'none';
                processingSection.style.display = 'none';
                reductionStats.style.display = 'block';
                downloadBtn.style.display = 'inline-block';
                
                // Store results
                compressionResults = {
                    originalSize: selectedFile.size,
                    compressedSize: selectedFile.size * 0.65, // Simulate 35% reduction
                    reduction: 35
                };
                
                // Update processing time
                document.getElementById('processingTime').textContent = `${steps.length * 0.8}s`;
                
                // Show success message
                showSuccessMessage('File compressed successfully!');
            }
            
            function showSuccessMessage(text = 'Operation completed successfully!') {
                const message = document.createElement('div');
                message.className = 'success-message';
                message.innerHTML = `
                    <i class="fas fa-check-circle"></i>
                    <span>${text}</span>
                `;
                message.style.cssText = `
                    position: fixed;
                    top: 20px;
                    right: 20px;
                    background: #10B981;
                    color: white;
                    padding: 15px 20px;
                    border-radius: 8px;
                    box-shadow: 0 5px 15px rgba(0,0,0,0.2);
                    display: flex;
                    align-items: center;
                    gap: 10px;
                    z-index: 3000;
                    animation: fadeInUp 0.3s ease;
                `;
                
                document.body.appendChild(message);
                
                setTimeout(() => {
                    message.style.animation = 'fadeOut 0.3s ease';
                    setTimeout(() => document.body.removeChild(message), 300);
                }, 3000);
            }
            
            // Add global styles
            const style = document.createElement('style');
            style.textContent = `
                @keyframes fadeOut {
                    from { opacity: 1; transform: translateY(0); }
                    to { opacity: 0; transform: translateY(-20px); }
                }
            `;
            document.head.appendChild(style);
            
            // Initialize with optimal preset
            applyPresetSettings('optimal');
        });
    </script>
</body>
</html>
